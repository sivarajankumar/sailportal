<?xml version="1.0" encoding="UTF-8"?>
<!-- Copyright University of Toronto 2006 (c) -->
<!-- $Id$ -->

<project name="sail-webapp" default="schema-export" basedir=".">
  <description>
      Build file for using Hibernate Tools for database schema generation
    </description>
  <!-- set global properties for this build -->
  <property file="build.properties" />

  <path id="toolslib">
    <path location="${M2_REPO}/org/hibernate/hibernate-tools/3.2.0.beta8/hibernate-tools-3.2.0.beta8.jar" />
    <path location="${M2_REPO}/org/hibernate/hibernate-annotations/3.2.0.ga/hibernate-annotations-3.2.0.ga.jar" />
    <path location="${M2_REPO}/org/hibernate/hibernate/3.2.0.ga/hibernate-3.2.0.ga.jar" />
    <path location="${M2_REPO}/commons-logging/commons-logging/1.1/commons-logging-1.1.jar" />
    <path location="${M2_REPO}/dom4j/dom4j/1.6.1/dom4j-1.6.1.jar" />
    <path location="${M2_REPO}/javax/persistence/persistence-api/1.0/persistence-api-1.0.jar" />
    <path location="${M2_REPO}/freemarker/freemarker/2.3.4/freemarker-2.3.4.jar" />
    <path location="${M2_REPO}/hsqldb/hsqldb/1.8.0.7/hsqldb-1.8.0.7.jar" />
    <path location="${M2_REPO}/org/acegisecurity/acegi-security/1.0.2/acegi-security-1.0.2.jar" />
    <path location="${M2_REPO}/commons-collections/commons-collections/2.1/commons-collections-2.1.jar" />
  </path>

  <taskdef name="hibernatetool" classname="org.hibernate.tool.ant.HibernateToolTask" classpathref="toolslib" />

  <!-- ================================= 
          target: schema-export
         ================================= -->
  <target name="schema-export" description="Generate database schema and export it.">
    <hibernatetool destdir="${dir.src.db.hsqldb}">
      <classpath>
        <path location="${dir.build}/classes" />
      </classpath>
      <annotationconfiguration configurationfile="${dir.src}/main/resources/hibernate.cfg.xml" propertyfile="${dir.src.db.hsqldb}/hibernate.properties" />
      <hbm2ddl export="${schema.export.on}" drop="${schema.export.drop}" create="${schema.export.create}" outputfilename="${schema.export.filename}" />
    </hibernatetool>
  </target>

</project>